name: Image Scanner

on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      - 'images/**/Dockerfile'

jobs:
  ImageScanner:
    runs-on: ubuntu-latest
    # strategy:
    #   matrix:
    #     images: [ nginx ] 
    #outputs:
    #  #format('{0}', matrix.images): ${{ steps.pull.outputs[format('{0}', matrix.images)] }}
    #  SHA: ${{ steps.pull.outputs.SHA }}
    
    steps:        
          # Checkout Repo
          - name: Check out the repository
            uses: actions/checkout@v4
          
          # Pull Latest Images
          - name: Check Changes Files
            id: check
            shell: pwsh
            run: |
                git log --name-only -n 1 | Where-Object {$_ -CLike "*/Dockerfile"} | ForEach-Object { Write-Host "$_"}
                #git show --name-only ${{ github.sha }}
                
                git show --name-only ${{ github.sha }} | Where-Object {$_ -CLike "*/Dockerfile"} | ForEach-Object { Write-Host "$_"}
                
